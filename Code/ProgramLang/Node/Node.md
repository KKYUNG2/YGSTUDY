# Nodejs

# 노드란 프로그래밍언어일까?

- 노드는 자바스크립트로 이루어진 프로그램을 컴퓨터에서 실행시킬 수 있습니다.

- 이렇게 노드는 자바스크립트처럼 프로그래밍언어가 아닌 자바스크립트 실행기라고 생각하시면 될거 같습니다.

-  V8과 libuv에 연결해주므로, 노드를 사용할 때 C와 C++는 몰라도 무관합니다.

- 노드 내장에 HTTP 서버 라이브러리를 포함하고 있어 웹 서버에서 아차피 등의 별도의 소프트웨어 없이 동작하는 것이 가능하다.

- 이를 통해 웹 서버의 동작에 있어 더 많은 통제를 가능하게 한다.



# 여기서 V8과 libuv란 무엇일까?

# libuv

- 노드의 특성인 이벤트 기반, 논 블로킹 I/O 모델을 구현하고 있습니다.

- 일반적인 라이브러리 I/O(입출력)처리는 요청마다 스레드를 사용하는 방식이지만, libuv는 비동기, 논블로킹 방식을 사용한다.

- nodejs는 기본적으로 libuv위에서 동작을 하며, node 인스턴스가 뜰 때, libuv에는 워커 쓰레드풀(default 4개)이 생성된다.
- 자바스크립트 런타임
- 자바스크립트 프로그램을 컴퓨터에서 실행할 수 있습니다.
- 노드는 자바스크립트 실행기
- V8과 libuv에 연결해주므로, 노드를 사용할 때 C와 C++는 몰라도 됩니다.
- 노드의 특성인 이벤트 기반, 논 블로킹 I/O 모델을 구현하고 있습니다.

# V8

- V8은 웹 브라우저를 만드는데 기반을 제공하는 오픈소스 자바스크립트 엔진이다.

- 구글크롬 브라우저와 안드로이드 브라우저에 탑재되어 있는 V8엔진의 장점을 사용하기 위해 노드에서 불러와 사용한다.

이벤트 기반

- 이벤트가 발생할 때 미리 지정해둔 작업을 수행하는 방식
- 이벤트로는 클릭이나 네트워크 요청 등이 있을 수 있습니다.

이벤트 기반 시스템

- 특정 이벤트가 발생할 때 무엇을 할지 미리 등록해두어야 합니다. 이를 이벤트 리스너에 콜백함수를 등록한다고 표현합니다.
- 버튼을 클릭할 때 경고창을 띄우도록 설정하는 것을 예로 들어보겠습니다. 클릭 이벤트 리스너에 경고창을 띄우는 콜백함수를 등록해두면 클릭 이벤트가 발생할 때마다 콜백 함수가 실행되어 경고창이 뜨는 것입니다.
- 노드도 이벤트 기반 방식으로 동작하므로, 이벤트가 발생하면 이벤트 리스너에 등록해둔 콜백 함수를 호출합니다.
- 발생한 이벤트가 없거나 발생했던 이벤트를 다 처리하면, 노드는 다음 이벤트가 발생할 때까지 대기합니다.

이벤트 루프

- 이벤트 발생 시 호출할 콜백 함수들을 관리하고, 호출된 콜백 함수의 실행 순서를 결정하는 역할을 담당합니다. 노드가 종료될 때까지 이벤트 처리를 위한 작업을 반복하므로 루프(loop)라고 부릅니다.

백그라운드

- setTimeout 같은 타이머나 이벤트 리스너들이 대기하는 곳입니다. 자바스크립트가 아닌 다른 언어로 작성된 프로그램이라고 봐도 됩니다. 여러 작업이 동시에 실행될 수 있습니다.

테스크 큐

- 이벤트 발생 후, 백그라운드에서는 테스크 큐로 타이머나 이벤트 리스너의 콜백함수를 보냅니다. 정해진 순서대로 코랙들이 줄을 서 있으므로 콜백 큐라고도 부릅니다. 콜백들은 보통 완료된 순서대로 줄을 서 있지만 특정한 경우에는 순서가 바뀌기도 합니다.

논 블로킹 I/O

- 이벤트 루프를 잘 활용하면 오래 걸리는 작업을 효율적으로 처리할 수 있습니다. 작업에는 두 가지 종류가 있는데, 동시에 실행될 수 있는 작업과 동시에 실행될 수 없는 작업입니다. 기본적으로 작성한 자바스크립트 코드는 동시에 실행될 수 없습니다. 하지만 자바스크립트상에서 돌아가는 것이 아닌 I/O 작업 같은 것은 동시에 처리될 수 있습니다.
- I/O는 입력(Input)/출력(Output)을 의미하니다. 파일 시스템 접근(파일 읽기, 파일 쓰기, 폴더 만들기 등)이나 네트워크를 통한 요청 같은 작업이 I/O의 일종입니다.
- 이러한 작업을 할 때 노드는 논 블로킹 방식으로 처리하는 방법을 제공합니다.
- 논 블로킹이란 이전 작업이 완료될 때까지 대기하지 않고 다음 작업을 수행함을 뜻합니다.
- 블로킹은 이전 작업이 끝나야만 다음 작업을 수행하는 것을 의미합니다.

논 블로킹

- 블로킹 방식보다 같은 작업을 더 짧은 시간에 처리할 수 있음을 알 수 있습니다. 다만 작업들이 모두 동시에 처리될 수 있는 작업이라는 전제가 있습니다.
- I/O 작업을 백그라운드로 넘겨 동시에 처리하곤 합니다. 따라서 동시에 처리될 수 있는 작업들은 최대한 묶어서 백그라운드로 넘겨야 시간을 절약할 수 있습니다.

싱글 스레드

- 이벤트 기반, 논 블로킹 모델과 더불어 노드를 설명할 때 자주 나오는 용어가 하나 더 있습니다. 바로 싱글 스레드입니다.
- 싱글 스레드란 스레드가 하나뿐이라는 것을 의미합니다.
- 작성한 자바스크립트 코드가 동시에 실행될 수 없는 이유이기도 합니다.
- 스레드를 이해하기 위해서는 프로세스부터 알아야 합니다.

